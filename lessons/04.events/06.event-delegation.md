# Event delegation

What would you do to listen for a `click` event on a list of items?

One way is to attach an event handler to each item. This is a great method if you only need to monitor a small number or items.

Another way is to use the event delegation pattern.

## Event delegation pattern

The event delegation pattern is a pattern where you use one event listener (attached on an ancestor element) to listen for events in descendant elements. It only works with events that bubble.

For example, let's say you have a list of items. To listen for the `click` event on each item, you can attach an event listener to the list container.

```html
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
  <li>Item 4</li>
  <li>Item 5</li>
</ul>
```

```js
const list = document.querySelector('ul')
ul.addEventListener('click' e => {
  // Do something when list is clicked on
})
```

The element that fires the event (the target that was clicked on) can be found with `event.target`.

```js
ul.addEventListener('click' e => console.log(event.target))
```

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

You can verify if the target is what you're looking for with `Element.matches`. If it is, you do something with it. `Element.matches` takes in a selector that you'd use with `Element.querySelector`.

```js
ul.addEventListener('click' e => {
  if (e.target.matches('li')) {
    console.log(e.target)
  }
})
```

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

## Nested elements in the target

If you have nested elements in your intended target, `e.target` will trigger on these nested elements instead.

For example, let's say you have a button with an icon:

```html
<button>
  <span data-icon="gear"></span>
  <span>Settings</span>
</button>
```

```js
const button = document.querySelector('button')
button.addEventListener('click', e => console.log(e.target))
```

If you click on the gear or the "settings" word within this button, `event.target` would be the gear icon. If you click on the "settings" word, the `event.target` would be the word. It's not ideal.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

One way to fix this is to use `Element.closest` to search for the Element you intend to target:

```js
button.addEventListener('click', e => {
  const button = e.closest('button')
  if (button) {
    // Do something with button
  }
})
```

Alternatively, you can also set `pointer-events: none;` all children of the button element. This way, they will never become the target for any mouse event.

```css
button > * {
  pointer-events: none;
}
```

```js
button.addEventListener('click', e => console.log(e.target))
```

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

## Exercise

Here's a list of famous people. With this list, create an event listener that uses the event delegation pattern. Log the name of the person that you clicked on into the console.

```html
<ul>
  <li>Benjamin Franklin</li>
  <li>Thomas Edison</li>
  <li>Franklin Roosevelt</li>
  <li>Napolean Bonaparte</li>
  <li>Abraham Lincoln</li>
</ul>
```


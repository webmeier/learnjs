# Event delegation

Lets say you have a list of items. How would you listen for a `click` event on each item?

One possible way is to attach an event listener to each item in the list. This method works great if you only monitor a small number of items. (since Event listeners take up memory).

If you need to monitor a large number of items, you'll want to use the event delegation pattern instead.

## Event delegation pattern

The event delegation pattern is a pattern where you attach one event listener to an ancestor element. This listener listens for events in descendant elements. This pattern only works for events that bubble.

For example, let's say you have a list of items. To listen for the `click` event on each item, you can attach an event listener to the list container.

```html
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
  <li>Item 4</li>
  <li>Item 5</li>
</ul>
```

```js
const list = document.querySelector('ul')
list.addEventListener('click', e => {
  // Do something when list is clicked on
})
```

The element that fires the event (the target that was clicked on) can be found with `event.target`.

```js
list.addEventListener('click', e => console.log(e.target))
```

<video autoplay loop>
  <source src="../../images/events/delegation/delegate.mp4" />
</video>

You can verify if the target is what you're looking for with `Element.matches`. If it is, you do something with it. `Element.matches` takes in a selector that you'd use with `Element.querySelector`.

```js
list.addEventListener('click' e => {
  if (e.target.matches('li')) {
    console.log(e.target)
  }
})
```

<video autoplay loop>
  <source src="../../images/events/delegation/delegate-fixed.mp4" />
</video>

## Nested elements in the target

If you have nested elements in your intended target, `e.target` will trigger on these nested elements instead.

For example, let's say you have a button with an icon:

```html
<button>
  <span data-icon="gear"></span>
  <span>Settings</span>
</button>
```

```js
const button = document.querySelector('button')
button.addEventListener('click', e => console.log(e.target))
```

If you click on the gear or the "settings" word within this button, `event.target` would be the gear icon. If you click on the "settings" word, the `event.target` would be the word. It's not ideal.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

One way to fix this is to use `Element.closest` to search for the Element you intend to target:

```js
button.addEventListener('click', e => {
  const button = e.closest('button')
  if (button) {
    // Do something with button
  }
})
```

Alternatively, you can also set `pointer-events: none;` all children of the button element. This way, they will never become the target for any mouse event.

```css
button > * {
  pointer-events: none;
}
```

```js
button.addEventListener('click', e => console.log(e.target))
```

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

## Exercise

Here's a list of famous people. With this list, create an event listener that uses the event delegation pattern. Log the name of the person that you clicked on into the console.

```html
<ul>
  <li>Benjamin Franklin</li>
  <li>Thomas Edison</li>
  <li>Franklin Roosevelt</li>
  <li>Napolean Bonaparte</li>
  <li>Abraham Lincoln</li>
</ul>
```


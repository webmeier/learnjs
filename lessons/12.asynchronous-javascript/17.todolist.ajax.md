# üõ†Ô∏è Todolist: Using the Todolist API

Okay! The first thing we want to do is to create a user. That means we're going to use the API you learned in the previous lesson.

## Creating a user

First, you need to create a user. This ensures you work with tasks that are uniquely yours. THis is still loose, because there isn't any authentication involved. So you might still be able to fetch other user's tasks. And also edit their tasks.

But don't worry about that, because this is a dummy API. I want to make sure you can learn, and not focus on the actual reality aspects with authentication and whatnot. Because not really required. It's going to be a bit more of a headache to create the actual authentication, so I'm skipping it.

But you know, maybe I should create one... so... the auth can really take place... I'll think about it in future. But for now, I'm going to shut this without authentication. At least for now.

Meh... Let's do the actual authentication thing. If I want to do it, might as well go all the way right. Don't do a half-fucked job!

Meh. Nah its fine. I guess.

```
```

Meh, it's fine. I don't care about their data getting polluted anyway. So I'm not going to worry about it. We're going to build more authentication stiff anyway.

Create your user by sending this request.

(Notice how I'm asking you to do it through a request. I'm not giving you a form to do it. Hopefully, this will give you more exercise with creating requests!)

```js
zlFetch(`http://api.learnjavascript.today/tasklist/users`, {
  method: 'post',
  body: {
    username: 'zellwk'
  }
})
```

You should get a response that the user is created.

<figure>
  <img src="/images/2018/" alt="">
  <figcaption></figcaption>
</figure>

## Fetching your tasks

Note: Three tasks will be created when you create a new user, so we will be able to fetch your tasks immediately.

To fetch your task, you can run the following:

```js
zlFetch(`http://api.learnjavascript.today/tasklist/users/:username/tasks`)
  .then(response => console.log(response))
  .catch(error => console.log(error))
```

You should see three tasks in your console. The three default tasks are:

1. Learn JavaScript for 39 minutes
2. Build a todolist
3. Drink water

We need to populate these tasks in the Todolist. To do this, we can run `makeTask` for each task.

```js
zlFetch(`${apiURL}/users/zellwk/tasks`)
  .then(response => {
    const tasks = response.body
    tasks.forEach(task => makeTask(task.task))
  })
  .catch(error => console.log(error))
```

<figure>
  <img src="/images/2018/" alt="">
  <figcaption></figcaption>
</figure>

## Creating a task

When the user types into the new field and hits enter, we want to create a task. This task will be saved in the database.

To save the file in the database, we need to send a request. We will wait till the task is successfully saved in the server before showing the task on the screen.

This takes a bit longer (not-so-good UX), but is easier to create. If we want to have instant UX, we'll have to show the task before its saved to the server, then when the response comes back from the server, we update our thingy. If the response comes back from the server and somehow the save has failed, we will need to undo the change. This is harder to achieve. But we will look at how to do this at a later lesson.

But for now, let's do this:

Man, this is the point where I start to get jittery because I don't know the actual best practices to get things done. Maybe I should buy the other course and go through it quickly.

```js
newTaskForm.addEventListener('submit', event => {
  // ...
  zlFetch(`${apiURL}/users/zellwk/tasks`, {
    method: 'post',
    body: { task }
  })
    .then(response => {
      makeTask(task)
      input.value = ''
      input.focus()
    })
    .catch(console.log)
})
```

A few things here to take note:

1. Check if done... But not going to talk about done yet.
2. Changing value
3. Changing the ID and the for attribute to the id from the task, because we don't need to generate them ourselves now.

Seems like a lot more work to be explained here. So I shall stop here for now. Will edit in a bit.

# Building a calculator

Okay, in this lesson you're going to learn to build a calculator.

Note: The calculator is more the most complicated component you've built so far. If you're doing it by yourself, it's likely that you'll code halfway, run into a problem, then take a step back and re code again.

I ran into three roadblocks coding the calculator when I didn't have a plan of action. :sweat smile:

haha

But I'm going to teach you step by step the how to get to the right answer. If you want to try it on your own, I welcome you to try. You'll get invaluable experience this way.

## How a calculator works

Before building a calculator, you need to be extremely familiar with how a calculator works. (I wasn't 100% sure, which was why I ran into roadblocks).

So, in this section, we're going to dive into that part first.

Here's an image of the calculator you'll build.

### What happens when you click on a number key?

Woo, captain obvious. Of course, the numbers should change. Right? But how does it change?

Pay close attention.

When the calculator is at it's default state, the number shown should be zero.

If you hit a number at this point (if the number is not zero), the number should replace zero.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

If you click a number when the displayed number is not zero, you should append the clicked number to the display.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

I think I can code something here.

What happens after you have some numbers? Well, do an operation (like add, substract, times, divide the number or press equal). Don't you?

<!-- But some people can hit the equal key right from the start! -->

### If they click on dot

If they click on the dot, a decimal should appear in the display. This happens regardless whether the first number is a zero.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

If they click on the dot more than once, when a dot is already displayed, nothing should happen.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

## When you click on an operator

An operator is the add, subtract, times, and divide key.

When you add an operator key, the key should light up to indicate that the key is currently in operation.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

If you hit an operator key after an operator key, the chosen operator should change to the clicked operator.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

If you click the same operator key twice, nothing should happen.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

### What happens when you click on numbers again

After hitting the operator key, if you hit a number key, the display should reset, showing the number clicked on next.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

Once again, if the first number entered is zero, the second non-zero number replaces the number.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

The operator keys aren't depressed anymore.

- What if you hit decimal after an operator key?
  + result = 0.

### Hit the equal key

IF hit equal key, no value set, nothing to calculate, so set to displayed num.

If got first value and operator, calculate.

If hit enter key again, continue calculate. Here, displayed num is supposed to be the first value, so you can't use `displayedNum` as the second value anymore.

What this means is, you need to save a modifier value as you second number. This modifier needs to be saved somewhere in memory, so you can access it even though the current data doesn't show it.

If you hit a number key that's not an operator (+, -, *, ÷), you need to remove the operator key, because the thing number switches again.

Order matters when calculating.

### Hit operator key

If you hit the operator key, the calculator should calculate the result of the previous two numbers entered. If you hit the enter key, the cacluator should also calculate the result of the previous two numbers entered.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

The difference is, if an operator is clicked, the operator should remain highlighted.

In both cases, the results needs to be ready to be used in the next calculation.

### Some people may hit the equal key again

IF the equal key is clicked, you should repeat the previous operation. If it's `1 + 1`, you should repeat the `+ 1` part. IF the previous operation is `5 * 27`, you should repeat the `* 27` part.

## Hitting the clear key

The clear key for most calculators have two uses

1. All Clear (denoted by `AC`)—clear everything; reset the calculator to it's initial state.
2. Clear entry (denoted by `CE` or just `C`)—clears the current entry; keeps the previous number in memory.

That leads to two states:

When no number is in memory, `AC` should be shown.
When a number is in memory, `CE` should be shown.

When `CE` is clicked, `CE` should clear the current entry (but keep the operator and previous number, if any). `CE` should then be updated to show `AC`, so the user can perform a full clear operation.

<figure>
  <img src="/images/2017/" alt="">
  <figcaption></figcaption>
</figure>

## A diagram of the logic flow.

Okay, you try building this :grin:

Next lesson, we'll build the calculator together